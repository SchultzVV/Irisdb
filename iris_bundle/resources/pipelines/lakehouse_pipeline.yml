resources:
  pipelines:
    iris_pipeline:
      name: iris-lakehouse-pipeline
      target: iris_pipeline_db
      serverless: true
      catalog: hive_metastore

      configuration:
        source: dbfs:/tmp/iris/iris.csv
        output_bronze_table: telecom_lakehouse.ml_assets.iris_bronze
        output_silver_table: telecom_lakehouse.ml_assets.iris_silver
        output_gold_table: telecom_lakehouse.ml_assets.iris_gold
        output_model: telecom_lakehouse.ml_assets.iris_model

      libraries:
        - notebook:
            path: /Workspace/Users/xultezz@gmail.com/.bundle/iris_bundle/dev/files/notebooks/01_ingest_bronze
        - notebook:
            path: /Workspace/Users/xultezz@gmail.com/.bundle/iris_bundle/dev/files/notebooks/02_transform_silver
        - notebook:
            path: /Workspace/Users/xultezz@gmail.com/.bundle/iris_bundle/dev/files/notebooks/03_aggregate_gold
        - notebook:
            path: /Workspace/Users/xultezz@gmail.com/.bundle/iris_bundle/dev/files/notebooks/04_train_model
        - notebook:
            path: /Workspace/Users/xultezz@gmail.com/.bundle/iris_bundle/dev/files/notebooks/05_batch_inference

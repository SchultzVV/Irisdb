# resources:
#   jobs:
#     bronze_job:
#       name: iris_bronze_ingestion
#       tags:
#         layer: "bronze"
#         project: "iris_pipeline"
#         trigger_order: "1"
#       tasks:
#         - task_key: ingest_bronze
#           description: "Ingest√£o de dados na camada Bronze do Unity Catalog"
#           notebook_task:
#             notebook_path: /Workspace/Users/vitorvazschultz@gmail.com/.bundle/iris_bundle/dev/files/notebooks/01_ingest_bronze
#             base_parameters:
#               source: ${var.source}
#               output_table: ${var.catalog_name}.${var.schema_name}.iris_bronze
#           timeout_seconds: 900
#           max_retries: 2

resources:
  jobs:
    bronze_job:
      name: iris_bronze_ingestion
      tasks:
        - task_key: ingest_bronze
          description: "Ingesta os dados brutos no Delta Lake (camada Bronze) usando Unity Catalog"
          notebook_task:
            # notebook_path: ${workspace.file_path}/notebooks/01_ingest_bronze
            notebook_path: /Workspace/Users/vitorvazschultz@gmail.com/.bundle/iris_bundle/dev/files/notebooks/01_ingest_bronze
            base_parameters:
              source: ${var.source}
              output_bronze_table: ${var.output_bronze_table}
              catalog_name: ${var.catalog_name}
              schema_name: ${var.schema_name}
          timeout_seconds: 3600
          max_retries: 1